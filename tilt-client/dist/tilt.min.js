/*! Tilt.js 0.0.0 - built 22-05-2014 */
!function(a){var b=function(b,c){return void 0===c?new a.Tilt.Sock(b):new a.Tilt.Sock(b,c)};a.Tilt=a.Tilt||{},a.Tilt.connect=b}(this),function(a){var b=function(a,b){this.sock=a,this.id=b};b.prototype={receiveSet:function(a,b){this[a]=b,this.sock.recieveMsg(this.id,[a+"Updated",b])}},a.Tilt=a.Tilt||{},a.Tilt.Controller=b}(this),function(a){var b=function(a,b){this.socket=io.connect(a);var c=this;void 0===b?(this.isGame=!0,this.roomID=!1,this.controllers=[],this.socket.on("notifyController",function(a){c.createController(a)}),this.socket.on("notifyControllerDisconnect",function(a){c.deleteController(a)}),this.socket.on("notifyRoomID",function(a){c.roomID=a}),this.socket.emit("join","computer"),this.socket.on("msg",function(a,b){c.receiveMsg(b,a)})):(this.socket.emit("join","controller",b),this.isGame=!1,this.roomID=b,this.socket.on("msg",function(a){c.receiveMsg(a)})),this.socket.on("notifySuccess",function(){console.log("success!")}),this.callbacks={}};b.prototype={on:function(a,b){return this.callbacks[a]=this.callbacks[a]||[],this.callbacks[a].push(b),this},off:function(a,b){return this.callbacks[a]=this.callbacks[a]||[],this.callbacks[a]=this.callbacks[a].filter(function(a){return a===b}),this},emit:function(){var a=Array.prototype.slice.call(arguments);if(this.isGame){var b=a.shift();"object"==typeof b&&(b=b.id),this.socket.emit("msg",b,a)}else this.socket.emit("msg",a);return this},receiveMsg:function(a,b){var c=a.shift();if(b&&a.unshift(b),void 0!==this.callbacks[c])for(var d in this.callbacks[c])this.callbacks[c][d].apply(this,a)},createController:function(a){return this.isGame===!1?(console.log("Warning: createController was called, but this is a controller."),!1):void this.controllers.push(new Tilt.Controller(this,a))},deleteController:function(a){return this.isGame===!1?(console.log("Warning: createController was called, but this is a controller."),!1):void(this.controllers=this.controllers.filter(function(b){return b.id===a}))}},a.Tilt=a.Tilt||{},a.Tilt.Sock=b}(this);